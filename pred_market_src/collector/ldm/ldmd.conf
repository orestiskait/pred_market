# =============================================================================
# LDM Configuration — ldmd.conf
# =============================================================================
# This file configures the Unidata Local Data Manager (LDM) to receive
# real-time surface observations (METAR / SPECI / Synoptic) from the
# Unidata Internet Data Distribution (IDD) system.
#
# Feedtype reference:
#   IDS|DDPLUS  — Domestic Data Plus: US METAR, SPECI, synoptic, TAF, etc.
#   HDS         — High-resolution Data Service (model output, upper-air)
#
# We only request IDS|DDPLUS, filtered to surface observations (SA/SP
# headers from US stations) to minimize bandwidth and storage.
# =============================================================================

# ── Data requests ────────────────────────────────────────────────────────────
# Syntax: REQUEST <feedtype> <product-ID-regex> <upstream-host>
#
# Request US surface observations from one of the primary Unidata IDD relays.
# The product-ID regex "^S[AP].*" matches:
#   SA = Surface Aviation (routine METAR)
#   SP = Surface SPECI (special reports)
#
# IMPORTANT: Before this works, you must contact support-idd@unidata.ucar.edu
# (or your institutional data provider) and ask them to add an ALLOW entry
# for your hostname/IP.  Provide:
#   - Hostname or IP of this LDM instance
#   - Contact name and email
#   - Feedtypes requested (IDS|DDPLUS)

REQUEST IDS|DDPLUS "^S[AP]" idd.unidata.ucar.edu

# Redundant upstream for reliability (if approved):
# REQUEST IDS|DDPLUS "^S[AP]" iddb.unidata.ucar.edu

# ── Allow entries ────────────────────────────────────────────────────────────
# Allow the Unidata Program Center to poll our LDM for monitoring.
# This is good practice and helps them maintain the IDD relay network.
ALLOW ANY ".*" .unidata.ucar.edu

# Allow localhost requests (needed for pqact, notifyme, etc.)
ALLOW ANY ".*" localhost

# ── pqact processing ────────────────────────────────────────────────────────
# Route incoming data through pqact.conf for file actions / pipeline
EXEC "pqact"
