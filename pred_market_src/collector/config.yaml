# ============================================================
# Kalshi Market Data Collector — Configuration
# ============================================================

kalshi:
  # API credentials: set via env vars KALSHI_API_KEY_ID and KALSHI_PRIVATE_KEY_PATH
  # (see .env.example in this directory)
  private_key_path: "/home/kaitores/.kalshi/kalshi_api_key.txt"

  base_url: "https://api.elections.kalshi.com/trade-api/v2"
  ws_url:   "wss://api.elections.kalshi.com/trade-api/ws/v2"

# Event tickers to track (uppercase).  Each event contains multiple contracts.
# Example: KXHIGHCHI-26FEB11  →  all temperature-range contracts for Chicago Feb 11.
events:
  - "KXHIGHCHI-26FEB18"
  - "KXHIGHNY-26FEB18"

# ----------------------------------------------------------
# Snapshot collection
# ----------------------------------------------------------
collection:
  # Baseline: snapshot every N seconds regardless of price activity.
  interval_seconds: 60

  # Spike detection: snapshot immediately when any contract's yes_bid, yes_ask,
  # or last_price moves by ≥ threshold cents since the *last snapshot*.
  # Compared against the last-snapshotted price (not the last WS message),
  # so cumulative moves during cooldown are never missed.
  spike_threshold_cents: 3

  # Min seconds between event-driven snapshots (prevents burst writes when
  # multiple contracts spike simultaneously or prices oscillate).
  spike_cooldown_seconds: 2

# ----------------------------------------------------------
# Storage
# ----------------------------------------------------------
storage:
  # Relative to this config file's directory.
  data_dir: "data"

  # How often to flush in-memory buffers to parquet (seconds).
  flush_interval_seconds: 300
